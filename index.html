<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://genng.github.io">
  <title>Genng</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="终将不再是曾经的那个少年！">
<meta property="og:type" content="website">
<meta property="og:title" content="Genng">
<meta property="og:url" content="http://genng.github.io/index.html">
<meta property="og:site_name" content="Genng">
<meta property="og:description" content="终将不再是曾经的那个少年！">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Genng">
<meta name="twitter:description" content="终将不再是曾经的那个少年！">
  
    <link rel="alternative" href="/atom.xml" title="Genng" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/main.css?v=4.0.0.css">
  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/img/head.jpg" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Jian</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Android&amp;iOS Language Blog</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/随笔/">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a data-idx="0" q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a data-idx="1" q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a data-idx="2" q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="http://genng.github.io" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/own1991" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-sort"></i></div>
  		<h1 class="header-author js-mobile-header hide">Jian</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/img/head.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Jian</h1>
			</hgroup>
			
			<p class="header-subtitle">Android&amp;iOS Language Blog</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/tags/随笔/">随笔</a></li>
		        
		        
		        	<li><a href="/archives/">所有文章</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="http://genng.github.io" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/own1991" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-2016年互联网总结ByJian" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/14/2016年互联网总结ByJian/">2016年互联网总结ByJian</a>
    </h1>
  

        <a href="/2016/12/14/2016年互联网总结ByJian/" class="archive-article-date">
  	<time datetime="2016-12-14T07:22:49.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-12-14</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>一年一年、又一年！</p>
</blockquote>
<p>1.元旦 微信 小范围内测朋友圈打赏看图片</p>
<p>2.支付宝 春节 集五福 、微信春晚 抢红包</p>
<p>3.滴滴、快递合并 移动支付大战 暂告一段落</p>
<p>4.直播大战&amp;自媒体 一直播、秒拍 等 ，微博重新火热起来了</p>
<p>5.共享单车（经济） 摩拜、ofo（校园单车）…优拜？</p>
<p>6.乐视资金链、各大互联网裁员风波</p>
<p>7.小米Mix、三星note7 爆炸门、iPhone6s 电池门、锤子M1、M1L情怀不敌现实，要先活下去</p>
<p>8.高通821、3D曲面屏、iPhone7双摄、内嵌玻璃指纹</p>
<p>9.VR&amp;AR Pokemon go、萌宠大作战（Ali山寨）、谷歌白日梦VR平台、<br>  HTC VR</p>
<p>10.支付宝 圈子（校园日记）</p>
<p>11.p2p 借贷宝 等</p>
<p>12.游戏 手游份额日益增长 守望先锋超越英雄联盟、电子竞技有望成为奥运赛事</p>
<p>13.网盘关闭、智能硬件不再火热</p>
<p>14.微信小程序 跨平台</p>
<p>15.知识付费 知乎live、分答</p>
<p>16.Google开发者平台，部分回归</p>
<blockquote>
<p>靠谱的互联网，越来越少，不靠谱的事，越来越多，2016年互联网寒冬？！</p>
</blockquote>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/12/14/2016年互联网总结ByJian/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-小记Android客户端ByJian" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/小记Android客户端ByJian/">小记Android客户端ByJian</a>
    </h1>
  

        <a href="/2016/12/13/小记Android客户端ByJian/" class="archive-article-date">
  	<time datetime="2016-12-13T08:15:35.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-12-13</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="http://genng.github.io/html/smallnote/start_bg.png" alt="file-list"><br>down link：<br><a href="http://genng.github.io/html/smallnote/index_down.html">http://genng.github.io/html/smallnote/index_down.html</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/12/13/小记Android客户端ByJian/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-移动H5前端性能优化指南" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/移动H5前端性能优化指南/">移动H5前端性能优化指南</a>
    </h1>
  

        <a href="/2016/12/13/移动H5前端性能优化指南/" class="archive-article-date">
  	<time datetime="2016-12-13T08:13:26.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-12-13</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="http://cc.cocimg.com/api/uploads/20150213/1423821863594849.png" alt="file-list"></p>
<p>概述</p>
<ol>
<li><p>PC优化手段在Mobile侧同样适用</p>
</li>
<li><p>在Mobile侧我们提出三秒种渲染完成首屏指标</p>
</li>
<li><p>基于第二点，首屏加载3秒完成或使用Loading</p>
</li>
<li><p>基于联通3G网络平均338KB/s(2.71Mb/s)，所以首屏资源不应超过1014KB</p>
</li>
<li><p>Mobile侧因手机配置原因，除加载外渲染速度也是优化重点</p>
</li>
<li><p>基于第五点，要合理处理代码减少渲染损耗</p>
</li>
<li><p>基于第二、第五点，所有影响首屏加载和渲染的代码应在处理逻辑中后置</p>
</li>
<li><p>加载完成后用户交互使用时也需注意性能</p>
</li>
</ol>
<p>优化指南</p>
<p>[加载优化]</p>
<p>加载过程是最为耗时的过程，可能会占到总耗时的80%时间，因此是优化的重点</p>
<p>· 减少HTTP请求</p>
<p>因为手机浏览器同时响应请求为4个请求（Android支持4个，iOS 5后可支持6个），所以要尽量减少页面的请求数，首次加载同时请求数不能超过4个</p>
<p>a) 合并CSS、JavaScript</p>
<p>b) 合并小图片，使用雪碧图</p>
<p>· 缓存</p>
<p>使用缓存可以减少向服务器的请求数，节省加载时间，所以所有静态资源都要在服务器端设置缓存，并且尽量使用长Cache（长Cache资源的更新可使用时间戳）</p>
<p>a) 缓存一切可缓存的资源</p>
<p>b) 使用长Cache（使用时间戳更新Cache）</p>
<p>c) 使用外联式引用CSS、JavaScript</p>
<p>· 压缩HTML、CSS、JavaScript</p>
<p>减少资源大小可以加快网页显示速度，所以要对HTML、CSS、JavaScript等进行代码压缩，并在服务器端设置GZip</p>
<p>a) 压缩（例如，多余的空格、换行符和缩进）</p>
<p>b) 启用GZip</p>
<p>· 无阻塞</p>
<p>写在HTML头部的JavaScript（无异步），和写在HTML标签中的Style会阻塞页面的渲染，因此CSS放在页面头部并使用Link方式引入，避免在HTML标签中写Style，JavaScript放在页面尾部或使用异步方式加载</p>
<p>· 使用首屏加载</p>
<p>首屏的快速显示，可以大大提升用户对页面速度的感知，因此应尽量针对首屏的快速显示做优化</p>
<p>· 按需加载</p>
<p>将不影响首屏的资源和当前屏幕资源不用的资源放到用户需要时才加载，可以大大提升重要资源的显示速度和降低总体流量</p>
<p>PS：按需加载会导致大量重绘，影响渲染性能</p>
<p>a) LazyLoad</p>
<p>b) 滚屏加载</p>
<p>c) 通过Media Query加载</p>
<p>· 预加载</p>
<p>大型重资源页面（如游戏）可使用增加Loading的方法，资源加载完成后再显示页面。但Loading时间过长，会造成用户流失。</p>
<p>对用户行为分析，可以在当前页加载下一页资源，提升速度。</p>
<p>a) 可感知Loading(如进入空间游戏的Loading)</p>
<p>b) 不可感知的Loading（如提前加载下一页）</p>
<p>· 压缩图片</p>
<p>图片是最占流量的资源，因此尽量避免使用他，使用时选择最合适的格式（实现需求的前提下，以大小判断），合适的大小，然后使用智图压缩，同时在代码中用Srcset来按需显示</p>
<p>PS：过度压缩图片大小影响图片显示效果</p>
<p>a) 使用智图（ <a href="http://zhitu.tencent.com/" target="_blank" rel="external">http://zhitu.tencent.com/</a> ）</p>
<p>b) 使用其它方式代替图片(1. 使用CSS3 2. 使用SVG 3. 使用IconFont)</p>
<p>c) 使用Srcset</p>
<p>d) 选择合适的图片(1. webP优于JPG 2. PNG8优于GIF)</p>
<p>e) 选择合适的大小（1. 首次加载不大于1014KB 2. 不宽于640（基于手机屏幕一般宽度））</p>
<p>· 减少Cookie</p>
<p>Cookie会影响加载速度，所以静态资源域名不使用Cookie</p>
<p>· 避免重定向</p>
<p>重定向会影响加载速度，所以在服务器正确设置避免重定向</p>
<p>· 异步加载第三方资源</p>
<p>第三方资源不可控会影响页面的加载和显示，因此要异步加载第三方资源</p>
<p>[脚本执行优化]</p>
<p>脚本处理不当会阻塞页面加载、渲染，因此在使用时需当注意</p>
<p>· CSS写在头部，JavaScript写在尾部或异步</p>
<p>· 避免图片和iFrame等的空Src</p>
<p>空Src会重新加载当前页面，影响速度和效率</p>
<p>· 尽量避免重设图片大小</p>
<p>重设图片大小是指在页面、CSS、JavaScript等中多次重置图片大小，多次重设图片大小会引发图片的多次重绘，影响性能</p>
<p>· 图片尽量避免使用DataURL</p>
<p>DataURL图片没有使用图片的压缩算法文件会变大，并且要解码后再渲染，加载慢耗时长</p>
<p>[CSS优化]</p>
<p>· 尽量避免写在HTML标签中写Style属性</p>
<p>· 避免CSS表达式</p>
<p>CSS表达式的执行需跳出CSS树的渲染，因此请避免CSS表达式</p>
<p>· 移除空的CSS规则</p>
<p>空的CSS规则增加了CSS文件的大小，且影响CSS树的执行，所以需移除空的CSS规则</p>
<p>· 正确使用Display的属性</p>
<p>Display属性会影响页面的渲染，因此请合理使用</p>
<p>a) display:inline后不应该再使用width、height、margin、padding以及float</p>
<p>b) display:inline-block后不应该再使用float</p>
<p>c) display:block后不应该再使用vertical-align</p>
<p>d) display:table-*后不应该再使用margin或者float</p>
<p>· 不滥用Float</p>
<p>Float在渲染时计算量比较大，尽量减少使用</p>
<p>· 不滥用Web字体</p>
<p>Web字体需要下载，解析，重绘当前页面，尽量减少使用</p>
<p>· 不声明过多的Font-size</p>
<p>过多的Font-size引发CSS树的效率</p>
<p>· 值为0时不需要任何单位</p>
<p>为了浏览器的兼容性和性能，值为0时不要带单位</p>
<p>· 标准化各种浏览器前缀</p>
<p>a) 无前缀应放在最后</p>
<p>b) CSS动画只用 （-webkit- 无前缀）两种即可</p>
<p>c) 其它前缀为 -webkit- -moz- -ms- 无前缀 四种，（-o-Opera浏览器改用blink内核，所以淘汰）</p>
<p>· 避免让选择符看起来像正则表达式</p>
<p>高级选择器执行耗时长且不易读懂，避免使用</p>
<p>[JavaScript执行优化]</p>
<p>· 减少重绘和回流</p>
<p>a) 避免不必要的Dom操作</p>
<p>b) 尽量改变Class而不是Style，使用classList代替className</p>
<p>c) 避免使用document.write</p>
<p>d) 减少drawImage</p>
<p>· 缓存Dom选择与计算</p>
<p>每次Dom选择都要计算，缓存他</p>
<p>· 缓存列表.length</p>
<p>每次.length都要计算，用一个变量保存这个值</p>
<p>· 尽量使用事件代理，避免批量绑定事件</p>
<p>· 尽量使用ID选择器</p>
<p>ID选择器是最快的</p>
<p>· TOUCH事件优化</p>
<p>使用touchstart、touchend代替click，因快影响速度快。但应注意Touch响应过快，易引发误操作</p>
<p>[渲染优化]</p>
<p>· HTML使用Viewport</p>
<p>Viewport可以加速页面的渲染，请使用以下代码</p>
<p>1<br><br><br>· 减少Dom节点</p>
<p>Dom节点太多影响页面的渲染，应尽量减少Dom节点</p>
<p>· 动画优化</p>
<p>a) 尽量使用CSS3动画</p>
<p>b) 合理使用requestAnimationFrame动画代替setTimeout</p>
<p>c) 适当使用Canvas动画 5个元素以内使用css动画，5个以上使用Canvas动画（iOS8可使用webGL）</p>
<p>· 高频事件优化</p>
<p>Touchmove、Scroll 事件可导致多次渲染</p>
<p>a) 使用requestAnimationFrame监听帧变化，使得在正确的时间进行渲染</p>
<p>b) 增加响应变化的时间间隔，减少重绘次数</p>
<p>· GPU加速</p>
<p>CSS中以下属性（CSS3 transitions、CSS3 3D transforms、Opacity、Canvas、WebGL、Video）来触发GPU渲染，请合理使用</p>
<p>PS：过渡使用会引发手机过耗电增加</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/12/13/移动H5前端性能优化指南/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-新奥营业厅App接口-v1-0" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/新奥营业厅App接口-v1-0/">新奥营业厅App接口 v1.0</a>
    </h1>
  

        <a href="/2016/12/13/新奥营业厅App接口-v1-0/" class="archive-article-date">
  	<time datetime="2016-12-13T08:12:43.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-12-13</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###1、登录接口<br><em>请求地址</em>：</p>
<pre><code>account/dlu
</code></pre><p><em>请求参数</em>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">name 用户名</div><div class="line">password 密码</div></pre></td></tr></table></figure></p>
<p><em>请求方式</em>：</p>
<pre><code>Http/Get
</code></pre><p><em>请求实例</em>：</p>
<pre><code>http://xxx.xxx.xxx/account/dlu?name=xxx&amp;password=xxxx
</code></pre><p><em>返回值</em>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">错误的情况</div><div class="line">    &#123;&quot;success&quot;:false,&quot;message&quot;:&quot;密码错误&quot;,&quot;obj&quot;:4&#125;</div><div class="line">    </div><div class="line">参数说明：</div><div class="line">    success 是否正确</div><div class="line">    message 提示信息</div><div class="line">    obj     错误代码</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">正确的情况</div><div class="line">    &#123;&quot;success&quot;:true,&quot;message&quot;:&quot;登录成功&quot;,&quot;obj&quot;:&#123;&quot;smartid&quot;:&quot;5539e2431a1d6000fc29ec0d&quot;,&quot;name&quot;:&quot;1111111&quot;,&quot;nickname&quot;:&quot;小白&quot;,&quot;id&quot;:35056,&quot;jfflag&quot;:0,&quot;rzflag&quot;:1,&quot;zfpasswordflag&quot;:1,&quot;logontime&quot;:&quot;2014/9/12 15:35:52&quot;,&quot;rSAUsename&quot;:&quot;ACB73ACFF1DE62B302FB5B145D8CDDC5839D7AFD7C58D401B54A25E1D1E1D9DDE82DF08595C151C77DA04A3ABA517EFF3AA6E3285A69356B35C7045EC053D2EF55EA3C04A1DDCD3773A11CC8963484E8D02A17F3FC5BDC172AECDC09B25B3590592F9D2C0EBFB4313BF2C035B10402ABFFF888061E9E70A618AEEF81FAF8823B&quot;,&quot;from&quot;:&quot;3&quot;,&quot;pid&quot;:&quot;529&quot;&#125;&#125;</div><div class="line">    </div><div class="line">参数说明：</div><div class="line">    smartid 唯一身份识别 70分钟失效</div><div class="line">    name 用户名</div><div class="line">    nickname 昵称</div><div class="line">    id 用户主键</div><div class="line">    jfflag 是否缴过费 默认 0 未缴过费</div><div class="line">    rzflag 是否实名认证 默认 0 未实名认证</div><div class="line">    zfpasswordflag 是否设置支付密码 默认 0 未设置</div><div class="line">    logontime 注册时间</div><div class="line">    rSAUsename RSA加密的用户名 适用于大米优惠活动</div><div class="line">    from 适用于大米优惠活动</div><div class="line">    pid 适用于大米优惠活动</div></pre></td></tr></table></figure>
<p>###2、注册接口（手机号）<br><em>请求地址</em>：</p>
<pre><code>Account/zcheMobile
</code></pre><p><em>请求参数</em>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mobile 手机号</div><div class="line">password  密码</div><div class="line">phonecode   手机验证码</div><div class="line">agreeok 是否同意协议 1是同意</div></pre></td></tr></table></figure></p>
<p><em>请求方式</em>：</p>
<pre><code>Http/Get
</code></pre><p><em>请求实例</em>：</p>
<pre><code>http://xxx.xxx.xxx/Account/zcheMobile?mobile=xxx&amp;password=xxxx&amp;&amp;phonecode=1235&amp;&amp;agreeok=1
</code></pre><p><em>返回值</em>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">错误的情况</div><div class="line">    &#123;&quot;success&quot;:false,&quot;message&quot;:&quot;手机号应该错误&quot;,&quot;obj&quot;:2&#125;</div><div class="line">    </div><div class="line">参数说明：</div><div class="line">    success 是否正确</div><div class="line">    message 提示信息</div><div class="line">    obj     错误代码</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">正确的情况</div><div class="line">    &#123;&quot;success&quot;:true,&quot;message&quot;:&quot;恭喜你，注册成功！&quot;,&quot;obj&quot;:3&#125;</div></pre></td></tr></table></figure>
<p>###3、注册接口（邮箱）<br><em>请求地址</em>：</p>
<pre><code>Account/zcheEmail
</code></pre><p><em>请求参数</em>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">email  邮箱 </div><div class="line">password  密码</div><div class="line">validatecode   验证码</div><div class="line">agreeok 是否同意协议 1是同意</div></pre></td></tr></table></figure></p>
<p><em>请求方式</em>：</p>
<pre><code>Http/Get
</code></pre><p><em>请求实例</em>：</p>
<pre><code>http://xxx.xxx.xxx/Account/zcheEmail?email=xxx&amp;password=xxxx&amp;&amp;validatecode=1235&amp;&amp;agreeok=1
</code></pre><p><em>返回值</em>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">错误的情况</div><div class="line">    &#123;&quot;success&quot;:false,&quot;message&quot;:&quot;手机号应该错误&quot;,&quot;obj&quot;:2&#125;</div><div class="line">    </div><div class="line">参数说明：</div><div class="line">    success 是否正确</div><div class="line">    message 提示信息</div><div class="line">    obj     错误代码</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">正确的情况</div><div class="line">    &#123;&quot;success&quot;:true,&quot;message&quot;:&quot;恭喜你，注册成功！&quot;,&quot;obj&quot;:3&#125;</div></pre></td></tr></table></figure>
<p>###4、校验用户名是否存在 用于注册<br><em>请求地址</em>：</p>
<pre><code>Account/ValidateUserName
</code></pre><p><em>请求参数</em>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">name  用户名</div></pre></td></tr></table></figure></p>
<p><em>请求方式</em>：</p>
<pre><code>Http/Get
</code></pre><p><em>请求实例</em>：</p>
<pre><code>http://xxx.xxx.xxx/Account/ValidateUserName?name=xxx
</code></pre><p><em>返回值</em>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">错误的情况</div><div class="line">    &#123;&quot;success&quot;:false,&quot;message&quot;:&quot;手机号已经存在&quot;,&quot;obj&quot;:2&#125;</div><div class="line">    </div><div class="line">参数说明：</div><div class="line">    success 是否正确</div><div class="line">    message 提示信息</div><div class="line">    obj     错误代码</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">正确的情况</div><div class="line">    &#123;&quot;success&quot;:true,&quot;message&quot;:&quot;恭喜你，可以注册！&quot;,&quot;obj&quot;:3&#125;</div></pre></td></tr></table></figure>
<p>###5、校验用户名 用于找回密码<br><em>请求地址</em>：</p>
<pre><code>Account/CheckName
</code></pre><p><em>请求参数</em>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">name  用户名</div></pre></td></tr></table></figure></p>
<p><em>请求方式</em>：</p>
<pre><code>Http/Get
</code></pre><p><em>请求实例</em>：</p>
<pre><code>http://xxx.xxx.xxx/Account/CheckName?name=xxx
</code></pre><p><em>返回值</em>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">错误的情况</div><div class="line">   &#123;&quot;success&quot;:false,&quot;message&quot;:&quot;用户名不存在&quot;,&quot;obj&quot;:0&#125;</div><div class="line">   </div><div class="line">   &#123;&quot;success&quot;:false,&quot;message&quot;:&quot;对不起，该用户没有验证手机&quot;,&quot;obj&quot;:1&#125;</div><div class="line">   </div><div class="line">   &#123;&quot;success&quot;:false,&quot;message&quot;:&quot;对不起，该用户没有验证手机,请通过验证邮箱修改密码&quot;,&quot;obj&quot;:2&#125;</div><div class="line">    </div><div class="line">参数说明：</div><div class="line">    success 是否正确</div><div class="line">    message 提示信息</div><div class="line">    obj     错误代码</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">正确的情况</div><div class="line">    &#123;&quot;success&quot;:true,&quot;message&quot;:&quot;&quot;,&quot;obj&quot;:&quot;xxxx&quot;&#125;</div></pre></td></tr></table></figure>
<p>###6、校验手机验证码 用于找回密码<br><em>请求地址</em>：</p>
<pre><code>Account/ValidateCode
</code></pre><p><em>请求参数</em>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">phone 手机号</div><div class="line">code  手机短信验证码</div></pre></td></tr></table></figure></p>
<p><em>请求方式</em>：</p>
<pre><code>Http/Get
</code></pre><p><em>请求实例</em>：</p>
<pre><code>http://xxx.xxx.xxx/Account/ValidateCode?phone=xxx&amp;&amp;code=1234
</code></pre><p><em>返回值</em>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">错误的情况</div><div class="line">   &#123;&quot;success&quot;:false,&quot;message&quot;:&quot;验证码不正确&quot;,&quot;obj&quot;:0&#125; 		</div><div class="line">   </div><div class="line">参数说明：</div><div class="line">    success 是否正确</div><div class="line">    message 提示信息</div><div class="line">    obj     错误代码</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">正确的情况</div><div class="line">    &#123;&quot;success&quot;:true,&quot;message&quot;:&quot;&quot;,&quot;obj&quot;:&quot;sidxxxxxx&quot;&#125;</div><div class="line">    </div><div class="line">    obj：用于修改密码的sid字段</div></pre></td></tr></table></figure>
<p>###7、修改密码 用于找回密码<br><em>请求地址</em>：</p>
<pre><code>Account/ChangePasswordNew
</code></pre><p><em>请求参数</em>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">phone 手机号</div><div class="line">SID 接口6返回的obj字段的数据</div><div class="line">newpassword 新密码 6-20位</div><div class="line">confirmnewpwd 确认密码 6-20位</div></pre></td></tr></table></figure></p>
<p><em>请求方式</em>：</p>
<pre><code>Http/Get
</code></pre><p><em>请求实例</em>：</p>
<pre><code>http://xxx.xxx.xxx/Account/ChangePasswordNew?phone=xxx&amp;&amp;SID=1234&amp;&amp;newpassword=11&amp;confirmnewpwd=11
</code></pre><p><em>返回值</em>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">错误的情况</div><div class="line">   &#123;&quot;success&quot;:false,&quot;message&quot;:&quot;两次密码不一致&quot;,&quot;obj&quot;:0&#125; 		</div><div class="line">   </div><div class="line">参数说明：</div><div class="line">    success 是否正确</div><div class="line">    message 提示信息</div><div class="line">    obj     错误代码</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">正确的情况</div><div class="line">    &#123;&quot;success&quot;:true,&quot;message&quot;:&quot;修改成功！&quot;,&quot;obj&quot;:&quot;&quot;&#125;</div></pre></td></tr></table></figure>
<p>###8、发送手机验证码<br><em>请求地址</em>：</p>
<pre><code>Account/CreateMobilePhoneCode
</code></pre><p><em>请求参数</em>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">phone 手机号</div><div class="line">type（可选）  默认不传，当用于找回密码时，传值&quot;reset&quot;</div></pre></td></tr></table></figure></p>
<p><em>请求方式</em>：</p>
<pre><code>Http/Get
</code></pre><p><em>请求实例</em>：</p>
<pre><code>http://xxx.xxx.xxx/Account/CreateMobilePhoneCode?phone=xxx
</code></pre><p><em>返回值</em>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">错误的情况</div><div class="line">   &#123;&quot;success&quot;:false,&quot;message&quot;:&quot;error&quot;,&quot;obj&quot;:0&#125; 		</div><div class="line">   </div><div class="line">参数说明：</div><div class="line">    success 是否正确</div><div class="line">    message 提示信息</div><div class="line">    obj     错误代码</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">正确的情况</div><div class="line">    &#123;&quot;success&quot;:true,&quot;message&quot;:&quot;发送成功！&quot;,&quot;obj&quot;:&quot;xxxx&quot;&#125;</div><div class="line">    </div><div class="line">参数说明： </div><div class="line">    obj为发送的验证码</div></pre></td></tr></table></figure>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/12/13/新奥营业厅App接口-v1-0/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-如何写面向互联网公司的求职简历" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/如何写面向互联网公司的求职简历/">如何写面向互联网公司的求职简历</a>
    </h1>
  

        <a href="/2016/12/13/如何写面向互联网公司的求职简历/" class="archive-article-date">
  	<time datetime="2016-12-13T08:12:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-12-13</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我在IT公司工作了六年，有着三年面试官的经历。在面试中，我发现很多人都不能写好一份求职简历，所以今天不谈iOS开发，谈谈如何写一份针对互联网公司的求职简历。</p>
<p>我主要想分享的内容包括：</p>
<pre><code>简历的页数不要超过两页（最好一页）
删掉不必要的信息
如果你实在太牛逼，最多写2页
重要的信息写在最前面
你的联系方式
你最重要的工作经历
不要简单罗列工作经历
列出你的工作中有价值的细节（有哪些技术上的困难等）
不要写任何虚假或夸大的信息
类似精通java，精通C/C++等
不要附加任何可能带来负面印象的信息
不要加照片
不要写政治面貌
不要写奇怪的爱好（打游戏，喝酒，抽烟）
不要写参加过某某培训公司的iOS培训
尽量用专业邮箱
用PDF格式
</code></pre><p>###简历不要超过两页（最好一页）</p>
<p>互联网公司和传统企业有着很大的区别，通常情况下，创新和效率是互联网公司比较追求的公司文化，所以体现在简历上，就是超过一页的简历通常会被认为不够专业。</p>
<p>更麻烦的是，多数这种简历很可能在HR手中就被过滤掉了，因为HR每天会收到大量的简历，一般情况下每份简历在手中的停留时间也就10秒钟左右。而超过一页的简历会需要更多的时间去寻找简历中的有价值部分，对于HR来说，她更倾向于认为这种人通常是不靠谱的，因为写个简历都不懂行规，为什么还要给他面试机会呢?</p>
<p>那么我们应该如何精简简历呢? 简单说来就是一个字：删！</p>
<p>删掉不必要的自我介绍信息，很多求职者会将自己在学校所学的课程罗列上去，例如：C语言，数据结构，数学分析。。。好家伙，一写就是几十门，还放在简历的最上面，就怕面试官看不见。对于这类信息，一个字：删！面试官不Care你上了哪些课程，而且在全中国，大家上的课程也都大同小异，所以没必要写出来。</p>
<p>删除不必要的工作或实习、实践经历。如果你找一份程序员的工作，那么你参加了奥运会的志愿者活动，并且拿到了奖励或者你参加学校的辩论队，获得了最佳辩手这些经历通常是不相关的。诸如此类的还有你帮导师代课，讲了和工作不相关的某某专业课，或者你在学生会工作等等。删除不相关的工作、实习或实践内容可以保证你的简历干净。当然，如果你实在没得可写，比如你是应届生，一点实习经历都没有，那可以适当写一两条，保证你能写够一页的简历，但是那两条也要注意是强调你的团队合作能力或者执行力之类的技能，因为这些才是面试官感兴趣的。</p>
<p>删除不必要的证书：最多写个4、6级的证书，什么教师资格证，中高级程序员证，还有国内的各种什么认证，都是没有人Care的。</p>
<p>删除不必要的细节，作为iOS开发的面试官，很多求职者在介绍自己的iOS项目经历的时候，介绍了这个工程用的工作环境是Mac OS，使用的机器是Mac Mini，编译器是XCode4.x，能够运行在iOS4.3以上环境，还有一些人，把这个项目用到的开源库都写上啦，什么ASI, AFNetworking, Cocoapods啥的。这些其实都不是重点，请删掉。后面我会讲，你应该如何介绍你的iOS项目经历。</p>
<p>自我评价，这个部分是应届生最喜欢写的，各种有没有的优点都写上，例如：</p>
<pre><code>性格开朗、稳重、有活力，待人热情、真诚；工作认真负责，积极主动，能吃苦耐劳，用于承受压力，勇于创新；有很强的组织能力和团队协作精神，具有较强的适应能力；纪律性强，工作积极配合；意志坚强，具有较强的无私奉献精神。对待工作认真负责，善于沟通、协调有较强的组织能力与团队精神；活泼开朗、乐观上进、有爱心并善于施教并行；上进心强、勤于学习能不断提高自身的能力与综合素质。
</code></pre><p>这些内容在面试的时候不太好考查，都可以删掉。通常如果有HR面的话，HR自然会考查一些你的沟通，抗压，性格等软实力。</p>
<p>我相信，不管你是刚毕业的学生，还是工作十年的老手，你都可以把你的简历精简到一页A4纸上。</p>
<p>###重要的信息写在最前面</p>
<p>将你觉得最吸引人的地方写在最前面。如果你有牛逼公司的实习，那就把实习经历写在最前面，如果你在一个牛逼的实验室里面做科研，就把研究成果和论文写出来，如果你有获得过比较牛逼的比赛名次（例如google code, ACM比赛之类），写上绝对吸引眼球。</p>
<p>所以，每个人的简历的介绍顺序应该都是不一样的，不要在网上下载一个模板，然后就一项一项地填：教育经历，实习经历，得奖经历，个人爱好，这样的简历毫无吸引力，也无法突出你的特点。</p>
<p>除了你的个人特点是重要信息外，你的手机号，邮箱，毕业院校，专业以及毕业时间这些也都是非常重要的，一定要写在简历最上面。</p>
<p>###不要简单地罗列工作经历</p>
<p>不要简单地说你开发了某某iOS客户端。这样简单的罗列你的作品集并不能让面试官很好地了解你的能力，当然，真正在面试时面试官可能会仔细询问，但是一份好的简历，应该省去一些面试官额外询问你的工作细节的时间。</p>
<p>具体的做法是：详细的描述你对于某某iOS客户端的贡献。主要包括：你参与了多少比例功能的开发? 你解决了哪些开发中的有挑战的问题? 你是不是技术负责人?</p>
<p>而且，通过你反思这些贡献，你也可以达到自我审视，如果你发现这个项目你根本什么有价值的贡献都没做，就打了打酱油，那你最好不要写在简历上，否则当面试官在面试时问起时，你会很难回答，最终让他发现你的这个项目经历根本一文不值时，肯定会给一个负面的印象。</p>
<p>###不要写任何虚假或夸大的信息</p>
<p>刚刚毕业的学生都喜欢写精通Java，精通C/C++，其实代码可能写了不到1万行，我觉得你要精通某个语言，至少得写50万行这个语言的代码才行，而且要对语言的各种内部机制和原理有了解。那些宣称精通Java的同学，连Java如何做内存回收，如何做范型支持，如何做自动boxing和unboxing的都不知道，真不知道为什么要写精通2字。</p>
<p>任何夸大或虚假的信息，在面试时被发现，会造成极差的面试印象，所以你如果对某个知识一知半解，要么就写“使用过”某某，要么就干脆不写。如果你简历实在太单薄，没办法写上了一些自己打酱油的项目，被问起来怎么办? 请看看下面的故事：</p>
<p>我面试过一个同学，他的面试时非常诚实，问他一些简历上的东西，他如果不会，就会老实说，这个我只是使用了一下，确实不清楚细节。对于一些没有技术含量的项目，他也会老实说，这个项目他做的工作比较少，主要是别人在做。最后他还会补充说，“我自认为自己数据结构和算法还不错，要不你问我这方面的知识吧。”</p>
<p>这倒是一个不错的办法，对于一个没有项目经验，但是聪明并且数据结构和算法基础知识扎实的应届生，其实我们是非常愿意培养的。很多人以为公司面试是看经验，希望招进来就能干活，其实不是的，至少我们现在以及我以前在网易招人，面试的是对方的潜力，没有项目经验根本关系不大。</p>
<p>总之，不要写任何虚假或夸大的信息，即使你最终骗得过面试官，进了某公司，如果能力不够，在最初的试用期内，也很可能因为能力不足而被开掉。</p>
<p>###不要附加任何可能带来负面印象的信息</p>
<p>任何与招聘工作无关的东西，尽量不要提。有些信息提了可能有加分，也可能有减分，取决于具体的面试官。而有些信息大部分情况下都是减分的，我罗列一下我认为是减分的信息。</p>
<p>不要在简历中附加个人照片。个人长相属于与工作能力不相关的信息，也许你觉得你长得很帅，那你怎么知道你的样子不和面试官的情敌长得一样? 也许你长得很漂亮，那么你怎么知道HR是否被你长得一样的小三把男朋友抢了? 我说得有点极端，那人们对于长相的评价标准确实千差万别，萝卜青菜各有所爱，加上可能有一些潜在的极端情况，所以没必要附加这部分信息。这属于加了可能有加分，也可能有减分的情况。</p>
<p>不要写你的政治面貌。你以为现在互联网公司还看重你是否是D员吗? 就算看重，你怎么知道他们认为这是加分还是减分? 我知道有一家公司，只要是D员的都直接拒掉。所以，除非你是面试的国企，在互联网公司，这一条最好不要写，写了有可能是平分，也有可能是减分，加分的可能性极小。</p>
<p>不要写各种奇怪的爱好。喜欢打Dota，喝酒，这类可能带来负面印象的爱好最好不要写。的确有些公司会有这种一起联机玩游戏或者喝酒的文化，不过除非你明确清楚对于目标公司，写上会是加分项，否则还是不写为妙。（顺便说一句，据我了解，阿里的朋友特别喜欢喝酒，面试阿里写上这个可能是加分的，但如果你要是遇到阿里里面正好不喝酒的Team或面试官，不要怪我。）</p>
<p>不要使用word格式的简历，使用PDF的格式。我在招iOS程序员时，好多人的简历都是Word格式的，mac下的office那么难用，公司好多人机器上都没有mac office。我真怀疑这些人真是的想投简历么? PDF格式的简历通常能展现出简历的专业性。</p>
<p>不要使用QQ号开头的QQ邮箱，例如 12345@qq.com ，邮箱的事情我之前简单说过，有些人很在乎这个，有些人觉得无所谓，我个人对用数字开头的QQ邮箱的求职者不会有加分，但是对使用gmail邮箱的求职者有加分。因为这涉及到个人的工作效率，使用gmail的人通常会使用邮件组，过滤器，IMAP协议，标签，这些都有助于提高工作效率。如果你非要使用QQ邮箱，也应该申请一个有意义的邮箱名，例如 tangqiao@qq.com 。相关的讨论可以参见知乎上的讨论：《用人单位拒绝聘用使用 QQ 邮箱发应聘邮件的求职者，这一行为是否合理？》</p>
<p>不要写参加过某某培训公司的iOS培训，特别是那种一、两个月的速成培训。这对于我和身边很多面试官来说，绝对是负分。面试当中，经验是一个考查点，但是学习能力比经验重要多了，如果你是参加培训学习的iOS开发，很可能说明你没有自学能力。这一点似乎很多人都没有搞清楚，大家可以看看 @老赵 在他的个人博客上发表的 《为什么我要反对北大青鸟》。 我在2年前也写过一篇博客《我们必须自学》，详细解释了我的看法。</p>
<p>Posted by 唐巧 Dec 22nd, 2013   summary</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/12/13/如何写面向互联网公司的求职简历/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Picasso使用" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/Picasso使用/">Picasso使用</a>
    </h1>
  

        <a href="/2016/12/13/Picasso使用/" class="archive-article-date">
  	<time datetime="2016-12-13T08:11:38.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-12-13</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Introduction<br>    <a href="http://square.github.io/picasso/" target="_blank" rel="external">http://square.github.io/picasso/</a></p>
<pre><code>Images add much-needed context and visual flair to Android applications. Picasso allows for hassle-free image loading in your application—often in one line of code!
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Picasso.with(context).load(&quot;http://i.imgur.com/DvpvklR.png&quot;).into(imageView);</div></pre></td></tr></table></figure>
<p>Many common pitfalls of image loading on Android are handled automatically by Picasso:</p>
<p>Handling ImageView recycling and download cancelation in an adapter.<br>Complex image transformations with minimal memory use.<br>Automatic memory and disk caching.<br>Sample application screenshot.</p>
<p>Features</p>
<p>ADAPTER DOWNLOADS</p>
<p>Adapter re-use is automatically detected and the previous download canceled.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@Override public void getView(int position, View convertView, ViewGroup parent) &#123;</div><div class="line">  SquaredImageView view = (SquaredImageView) convertView;</div><div class="line">  if (view == null) &#123;</div><div class="line">    view = new SquaredImageView(context);</div><div class="line">  &#125;</div><div class="line">  String url = getItem(position);</div><div class="line"></div><div class="line">  Picasso.with(context).load(url).into(view);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>IMAGE TRANSFORMATIONS</p>
<p>Transform images to better fit into layouts and to reduce memory size.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Picasso.with(context)</div><div class="line">  .load(url)</div><div class="line">  .resize(50, 50)</div><div class="line">  .centerCrop()</div><div class="line">  .into(imageView)</div></pre></td></tr></table></figure></p>
<p>You can also specify custom transformations for more advanced effects.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">public class CropSquareTransformation implements Transformation &#123;</div><div class="line">  @Override public Bitmap transform(Bitmap source) &#123;</div><div class="line">    int size = Math.min(source.getWidth(), source.getHeight());</div><div class="line">    int x = (source.getWidth() - size) / 2;</div><div class="line">    int y = (source.getHeight() - size) / 2;</div><div class="line">    Bitmap result = Bitmap.createBitmap(source, x, y, size, size);</div><div class="line">    if (result != source) &#123;</div><div class="line">      source.recycle();</div><div class="line">    &#125;</div><div class="line">    return result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  @Override public String key() &#123; return &quot;square()&quot;; &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Pass an instance of this class to the transform method.</p>
<p>PLACE HOLDERS</p>
<p>Picasso supports both download and error placeholders as optional features.</p>
<pre><code>Picasso.with(context)
.load(url)
.placeholder(R.drawable.user_placeholder)
.error(R.drawable.user_placeholder_error)
.into(imageView);
</code></pre><p>A request will be retried three times before the error placeholder is shown.</p>
<p>RESOURCE LOADING</p>
<p>Resources, assets, files, content providers are all supported as image sources.</p>
<pre><code>Picasso.with(context).load(R.drawable.landing_screen).into(imageView1);
Picasso.with(context).load(&quot;file:///android_asset/DvpvklR.png&quot;).into(imageView2);
Picasso.with(context).load(new File(...)).into(imageView3);
</code></pre><p>DEBUG INDICATORS</p>
<p>For development you can enable the display of a colored ribbon which indicates the image source. Call setIndicatorsEnabled(true) on the Picasso instance.</p>
<p>Debug ribbon indicators</p>
<p>Download</p>
<p>↓ v2.5.2 JAR</p>
<p>The source code to the Picasso, its samples, and this website is available on GitHub.</p>
<p>MAVEN</p>
<p><dependency><br>  <groupid>com.squareup.picasso</groupid><br>  <artifactid>picasso</artifactid><br>  <version>2.5.2</version><br></dependency><br>GRADLE</p>
<p>compile ‘com.squareup.picasso:picasso:2.5.2’<br>Contributing</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/12/13/Picasso使用/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Android-Studio-jar-与-aar-的生成与-aar导入项目方法" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/Android-Studio-jar-与-aar-的生成与-aar导入项目方法/">Android Studio] *.jar 与 .aar 的生成与.aar导入项目方法</a>
    </h1>
  

        <a href="/2016/12/13/Android-Studio-jar-与-aar-的生成与-aar导入项目方法/" class="archive-article-date">
  	<time datetime="2016-12-13T08:10:43.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-12-13</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>主要讲解Android Studio中生成aar文件以及本地方式使用aar文件的方法。<br>在Android Studio中对一个自己库进行生成操作时将会同时生成<em>.jar与</em>.aar文件。<br>分别存储位置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">*.jar：库/build/intermediates/bundles/debug(release)/classes.jar</div><div class="line"></div><div class="line">*.aar：库/build/outputs/aar/libraryname.aar</div></pre></td></tr></table></figure></p>
<p>两者区别：<br>*.jar：只包含了class文件与清单文件，不包含资源文件，如图片等所有res中的文件。</p>
<p>*.aar：包含所有资源，class以及res资源文件全部包含</p>
<p>如果你只是一个简单的类库那么使用生成的<em>.jar文件即可；如果你的是一个UI库，包含一些自己写的控件布局文件以及字体等资源文件那么就只能使用</em>.aar文件。</p>
<p>使用方式：</p>
<pre><code>*.jar：拷贝到：libs目录，eclipse直接导入即可，AndroidStudio项目中添加：



dependencies {
compile fileTree(include: [&apos;*.jar&apos;], dir: &apos;libs&apos;)
}
</code></pre><p>重新编译一次项目既可完成加载。</p>
<p>*.aar：有两种方式，分别为本地加载以及网络加载，由于网络加载涉及到发布到mavenCentral托管的问题这里不做讨论；另外eclipse很久没有使用了也不做讨论；在这里给大家说一种本地加载的方式，简单快捷。</p>
<p>这里演示的aar文件为：”genius.aar“</p>
<p>第一步：拷贝到：libs目录</p>
<p>第二步：build.gradle 配置文件中更改为</p>
<pre><code>repositories {
flatDir {
    dirs &apos;libs&apos;
    }
}
dependencies {
    compile(name:&apos;genius&apos;, ext:&apos;aar&apos;)
}
</code></pre><p>分别添加了”repositories“与更改了”dependencies“，然后重新编译一次项目就可以正常使用了。</p>
<p>这时打开你的项目地址”uildintermediatesexploded-aar“你会发现下面多了一个文件夹”genius“打开后能看见里边包含了一个”classes.jar“文件与一些资源文件和”R.txt“文件。</p>
<p>\</p>
<p>这就是Android Studio自动解析了aar文件后出现的东西。</p>
<p><img src="http://www.bkjia.com/uploads/allimg/141006/0406351212-0.png" alt="file-list"></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/12/13/Android-Studio-jar-与-aar-的生成与-aar导入项目方法/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Android-Gradle-模块化开发实例-Demo" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/Android-Gradle-模块化开发实例-Demo/">Android Gradle 模块化开发实例 Demo</a>
    </h1>
  

        <a href="/2016/12/13/Android-Gradle-模块化开发实例-Demo/" class="archive-article-date">
  	<time datetime="2016-12-13T08:10:06.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-12-13</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>前言</p>
<p>这两天看到一篇文章很火，详细见：<a href="http://stormzhang.com/android/2015/03/01/android-reference-local-aar/" target="_blank" rel="external">http://stormzhang.com/android/2015/03/01/android-reference-local-aar/</a><br>我大概看了下，然后搜索了下相关资料，作者说的没有错，我很欣赏这种行为，其实是已经在Google上搜刮过了，然后进行总结写文章。就如作者说的，就算官网上对于aar的描述也是凤毛菱角。简单来讲，jar包中封装的大多是一些方法，但是aar其实就是一个完整的Android App，所以包括了所有的资源文件等，我们可以很好的使用已经封装好的一些风格，包括UI界面显示等。</p>
<p>感谢作者的文章，我也是看了之后想试试看例子，不过网上找了一圈，发现都是在Gradle正式release前的例子，所以就还是自给自足啦。</p>
<p>创建一个aar<br><img src="http://testerhome.com/photo/2015/b5670b9adac66ee4e7b6d8581cb35a6b.png" alt="file-list"></p>
<p>既然我们要做，首先先创建一个aar包咯。本次的demo全部是本地化的引用。首先我们new一个新的Module出来。</p>
<p>我们新建了一个Android Library，我们从结构中可以看出和一个Android App的Project没有什么区别。<br><img src="http://testerhome.com/photo/2015/df026a04157f4cdd3f1c470303157b90.png" alt="file-list"></p>
<p>唯独的区别在于build.gradle，需要定义apply plugin: ‘com.android.library’，告诉studio这是一个library。定义如下：</p>
<p>apply plugin: ‘com.android.library’</p>
<p>android {<br>    compileSdkVersion 22<br>    buildToolsVersion “22.0.0”</p>
<pre><code>defaultConfig {
    minSdkVersion 10
    targetSdkVersion 22
    versionCode 1
    versionName &quot;1.0&quot;
}
buildTypes {
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;
    }
}
</code></pre><p>}</p>
<pre><code>dependencies {
    compile fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;])
    compile &apos;com.android.support:appcompat-v7:22.0.0&apos;
}
</code></pre><p>我们现在来修改下我们的主方法，添加一个如下的方法（记得还是修改下主类名）：</p>
<pre><code>public static  void DisPlayToast(Context context){
    Toast.makeText(context,&quot;this is aar toast&quot;,Toast.LENGTH_LONG).show();
}
</code></pre><p>接着我们就可以来编译啦。进入library，执行gradle assembleDebug，接着我们可以在~/AndroidLibrary2/mylibrary/build/outputs/aar/目录下找到我们编译好的aar文件。是不是很简单</p>
<p>本地加载aar</p>
<p>我们有了aar之后，将这个文件放入我们app工程的libs目录下，这样我们就可以进行调用啦。修改app的build.gradle如下：</p>
<pre><code>apply plugin: &apos;com.android.application&apos;

android {
 compileSdkVersion 22
    buildToolsVersion &quot;22.0.0&quot;

defaultConfig {
    applicationId &quot;com.example.monkey.androidlibrary2&quot;
    minSdkVersion 17
    targetSdkVersion 22
    versionCode 1
    versionName &quot;1.0&quot;
}
buildTypes {
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;
    }
}
</code></pre><p>}<br>    repositories {<br>        flatDir {<br>            dirs ‘libs’<br>        }<br>        mavenCentral()<br>        mavenLocal()<br>    }</p>
<pre><code>dependencies {
    compile(name:&apos;mylibrary3-debug&apos;, ext:&apos;aar&apos;)     //这里我因为尝试了几次，所以都是数字编号了，大家可以无视

    compile fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;])
    compile &apos;com.android.support:appcompat-v7:22.0.0&apos;
}
</code></pre><p>开始对app进行编译，这样的话工程会自动将这个aar文件解析出来。使用gradle assembleDebug。我们可以看到在/app/build/intermediates/exploded-aar/目录下已经有了我们增加的aar包的文件引用。如下</p>
<p><img src="http://testerhome.com/photo/2015/1bcc59ddcdb836ba63e584a485748dd5.png" alt="file-list"></p>
<p>修改app代码如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">package com.example.monkey.androidlibrary2;</div><div class="line"></div><div class="line">import android.os.Bundle;</div><div class="line">import android.view.Menu;</div><div class="line">import android.view.MenuItem;</div><div class="line"></div><div class="line">import com.example.monkey.mylibrary.aarActivity;</div><div class="line"></div><div class="line"></div><div class="line">public class MyActivity extends aarActivity &#123;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">        DisPlayToast(this);</div><div class="line">     //   Toast.makeText(this,&quot;test&quot;,Toast.LENGTH_LONG).show();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    public boolean onCreateOptionsMenu(Menu menu) &#123;</div><div class="line">        // Inflate the menu; this adds items to the action bar if it is present.</div><div class="line">        getMenuInflater().inflate(R.menu.menu_main, menu);</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public boolean onOptionsItemSelected(MenuItem item) &#123;</div><div class="line">        // Handle action bar item clicks here. The action bar will</div><div class="line">        // automatically handle clicks on the Home/Up button, so long</div><div class="line">        // as you specify a parent activity in AndroidManifest.xml.</div><div class="line">        int id = item.getItemId();</div><div class="line"></div><div class="line">        //noinspection SimplifiableIfStatement</div><div class="line">        if (id == R.id.action_settings) &#123;</div><div class="line">            return true;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return super.onOptionsItemSelected(item);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>其实从maven和jcenter()上下载也是一个逻辑，没有什么太大区别。只不过貌似在Gradle 1.0之前本地引用是有bug的。</p>
<p>代码地址：<a href="https://github.com/monkeytest15/Gradle_aar/tree/master/AndroidLibrary2" target="_blank" rel="external">https://github.com/monkeytest15/Gradle_aar/tree/master/AndroidLibrary2</a></p>
<p>后续</p>
<p>我发现我sdk更新的不完善，我表示我要回家更新完整之后再做后续的讨论了。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/12/13/Android-Gradle-模块化开发实例-Demo/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Eclipse-Java注释模板设置" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/Eclipse-Java注释模板设置/">Eclipse Java注释模板设置</a>
    </h1>
  

        <a href="/2016/12/13/Eclipse-Java注释模板设置/" class="archive-article-date">
  	<time datetime="2016-12-13T08:09:29.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-12-13</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>设置注释模板的入口： Window-&gt;Preference-&gt;Java-&gt;Code Style-&gt;Code Template 然后展开Comments节点就是所有需设置注释的元素啦。现就每一个元素逐一介绍：</p>
<p>文件(Files)注释标签：</p>
<pre><code>/**   
* @Title: ${file_name} 
* @Package ${package_name} 
* @Description: ${todo}(用一句话描述该文件做什么) 
* @author A18ccms A18ccms_gmail_com   
* @date ${date} ${time} 
* @version V1.0   
*/
</code></pre><p>类型(Types)注释标签（类的注释）：</p>
<pre><code>/** 
* @ClassName: ${type_name} 
* @Description: ${todo}(这里用一句话描述这个类的作用) 
* @author A18ccms a18ccms_gmail_com 
* @date ${date} ${time} 
* 
* ${tags} 
*/
</code></pre><p>字段(Fields)注释标签：</p>
<pre><code>/** 
* @Fields ${field} : ${todo}(用一句话描述这个变量表示什么) 
*/ 
</code></pre><p>构造函数标签：</p>
<pre><code>/** 
* &lt;p&gt;Title: &lt;/p&gt; 
* &lt;p&gt;Description: &lt;/p&gt; 
* ${tags} 
*/
</code></pre><p>方法(Constructor &amp; Methods)标签：</p>
<pre><code>/** 
* @Title: ${enclosing_method} 
* @Description: ${todo}(这里用一句话描述这个方法的作用) 
* @param ${tags}    设定文件 
* @return ${return_type}    返回类型 
* @throws 
*/
</code></pre><p>覆盖方法(Overriding Methods)标签：</p>
<pre><code>/* (非 Javadoc) 
* &lt;p&gt;Title: ${enclosing_method}&lt;/p&gt; 
* &lt;p&gt;Description: &lt;/p&gt; 
* ${tags} 
* ${see_to_overridden} 
*/
</code></pre><p>代表方法(Delegate Methods)标签：</p>
<pre><code>/** 
* ${tags} 
* ${see_to_target} 
*/ 
</code></pre><p>getter方法标签：</p>
<pre><code>/** 
* @return ${bare_field_name} 
*/
</code></pre><p>setter方法标签：</p>
<pre><code>/** 
* @param ${param} 要设置的 ${bare_field_name} 
*/
</code></pre>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/12/13/Eclipse-Java注释模板设置/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Android性能优化之渲染篇" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/Android性能优化之渲染篇/">Android性能优化之渲染篇</a>
    </h1>
  

        <a href="/2016/12/13/Android性能优化之渲染篇/" class="archive-article-date">
  	<time datetime="2016-12-13T08:08:50.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-12-13</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Google近期在Udacity上发布了Android性能优化的在线课程，目前有三个篇章，分别从渲染，运算与内存，电量三个方面介绍了如何去优化性能，这些课程是Google之前在Youtube上发布的Android性能优化典范专题课程的细化与补充。</p>
<p><img src="http://hukai.me/images/android_performance_course_udacity.jpg" alt="此处输入图片的描述"><br>下面是渲染篇章的学习笔记，部分内容和前面的性能优化典范有重合，欢迎大家一起学习交流！</p>
<h3 id="1-Why-Rendering-Performance-Matters"><a href="#1-Why-Rendering-Performance-Matters" class="headerlink" title="1)Why Rendering Performance Matters"></a>1)Why Rendering Performance Matters</h3><p>现在有不少App为了达到很华丽的视觉效果，会需要在界面上层叠很多的视图组件，但是这会很容易引起性能问题。如何平衡Design与Performance就很需要智慧了。</p>
<h3 id="2-Defining-‘Jank’"><a href="#2-Defining-‘Jank’" class="headerlink" title="2)Defining ‘Jank’"></a>2)Defining ‘Jank’</h3><p>大多数手机的屏幕刷新频率是60hz，如果在1000/60=16.67ms内没有办法把这一帧的任务执行完毕，就会发生丢帧的现象。丢帧越多，用户感受到的卡顿情况就越严重。</p>
<h3 id="3-Rendering-Pipeline-Common-Problems"><a href="#3-Rendering-Pipeline-Common-Problems" class="headerlink" title="3)Rendering Pipeline: Common Problems"></a>3)Rendering Pipeline: Common Problems</h3><p>渲染操作通常依赖于两个核心组件：CPU与GPU。CPU负责包括Measure，Layout，Record，Execute的计算操作，GPU负责Rasterization(栅格化)操作。CPU通常存在的问题的原因是存在非必需的视图组件，它不仅仅会带来重复的计算操作，而且还会占用额外的GPU资源。</p>
<h3 id="4-Android-UI-and-the-GPU"><a href="#4-Android-UI-and-the-GPU" class="headerlink" title="4)Android UI and the GPU"></a>4)Android UI and the GPU</h3><p>了解Android是如何利用GPU进行画面渲染有助于我们更好的理解性能问题。一个很直接的问题是：activity的画面是如何绘制到屏幕上的？那些复杂的XML布局文件又是如何能够被识别并绘制出来的？</p>
<p>Resterization栅格化是绘制那些Button，Shape，Path，String，Bitmap等组件最基础的操作。它把那些组件拆分到不同的像素上进行显示。这是一个很费时的操作，GPU的引入就是为了加快栅格化的操作。</p>
<p>CPU负责把UI组件计算成Polygons，Texture纹理，然后交给GPU进行栅格化渲染。</p>
<p>然而每次从CPU转移到GPU是一件很麻烦的事情，所幸的是OpenGL ES可以把那些需要渲染的纹理Hold在GPU Memory里面，在下次需要渲染的时候直接进行操作。所以如果你更新了GPU所hold住的纹理内容，那么之前保存的状态就丢失了。</p>
<p>在Android里面那些由主题所提供的资源，例如Bitmaps，Drawables都是一起打包到统一的Texture纹理当中，然后再传递到GPU里面，这意味着每次你需要使用这些资源的时候，都是直接从纹理里面进行获取渲染的。当然随着UI组件的越来越丰富，有了更多演变的形态。例如显示图片的时候，需要先经过CPU的计算加载到内存中，然后传递给GPU进行渲染。文字的显示比较复杂，需要先经过CPU换算成纹理，然后交给GPU进行渲染，返回到CPU绘制单个字符的时候，再重新引用经过GPU渲染的内容。动画则存在一个更加复杂的操作流程。</p>
<p>为了能够使得App流畅，我们需要在每帧16ms以内处理完所有的CPU与GPU的计算，绘制，渲染等等操作。</p>
<h3 id="5-GPU-Problem-Overdraw"><a href="#5-GPU-Problem-Overdraw" class="headerlink" title="5)GPU Problem: Overdraw"></a>5)GPU Problem: Overdraw</h3><p>Overdraw(过度绘制)描述的是屏幕上的某个像素在同一帧的时间内被绘制了多次。在多层次重叠的UI结构里面，如果不可见的UI也在做绘制的操作，会导致某些像素区域被绘制了多次。这样就会浪费大量的CPU以及GPU资源。</p>
<p>当设计上追求更华丽的视觉效果的时候，我们就容易陷入采用复杂的多层次重叠视图来实现这种视觉效果的怪圈。这很容易导致大量的性能问题，为了获得最佳的性能，我们必须尽量减少Overdraw的情况发生。</p>
<p>幸运的是，我们可以通过手机设置里面的开发者选项，打开Show GPU Overdraw的选项，观察UI上的Overdraw情况。</p>
<p>蓝色，淡绿，淡红，深红代表了4种不同程度的Overdraw情况，我们的目标就是尽量减少红色Overdraw，看到更多的蓝色区域。</p>
<h3 id="6-Visualize-and-Fix-Overdraw-Quiz-amp-Solution"><a href="#6-Visualize-and-Fix-Overdraw-Quiz-amp-Solution" class="headerlink" title="6)Visualize and Fix Overdraw - Quiz &amp; Solution"></a>6)Visualize and Fix Overdraw - Quiz &amp; Solution</h3><p>这里举了一个例子，通过XML文件可以看到有好几处非必需的background。通过把XML中非必需的background移除之后，可以显著减少布局的过度绘制。其中一个比较有意思的地方是：针对ListView中的Avatar ImageView的设置，在getView的代码里面，判断是否获取到对应的Bitmap，在获取到Avatar的图像之后，把ImageView的Background设置为Transparent，只有当图像没有获取到的时候才设置对应的Background占位图片，这样可以避免因为给Avatar设置背景图而导致的过度渲染。</p>
<p>总结一下，优化步骤如下：</p>
<pre><code>移除Window默认的Background
移除XML布局文件中非必需的Background
按需显示占位背景图片
</code></pre><h3 id="7-ClipRect-amp-QuickReject"><a href="#7-ClipRect-amp-QuickReject" class="headerlink" title="7)ClipRect &amp; QuickReject"></a>7)ClipRect &amp; QuickReject</h3><p>前面有提到过，对不可见的UI组件进行绘制更新会导致Overdraw。例如Nav Drawer从前置可见的Activity滑出之后，如果还继续绘制那些在Nav Drawer里面不可见的UI组件，这就导致了Overdraw。为了解决这个问题，Android系统会通过避免绘制那些完全不可见的组件来尽量减少Overdraw。那些Nav Drawer里面不可见的View就不会被执行浪费资源。</p>
<p>但是不幸的是，对于那些过于复杂的自定义的View(通常重写了onDraw方法)，Android系统无法检测在onDraw里面具体会执行什么操作，系统无法监控并自动优化，也就无法避免Overdraw了。但是我们可以通过canvas.clipRect()来帮助系统识别那些可见的区域。这个方法可以指定一块矩形区域，只有在这个区域内才会被绘制，其他的区域会被忽视。这个API可以很好的帮助那些有多组重叠组件的自定义View来控制显示的区域。同时clipRect方法还可以帮助节约CPU与GPU资源，在clipRect区域之外的绘制指令都不会被执行，那些部分内容在矩形区域内的组件，仍然会得到绘制。</p>
<p>除了clipRect方法之外，我们还可以使用canvas.quickreject()来判断是否没和某个矩形相交，从而跳过那些非矩形区域内的绘制操作。</p>
<h3 id="8-Apply-clipRect-and-quickReject-Quiz-amp-Solution"><a href="#8-Apply-clipRect-and-quickReject-Quiz-amp-Solution" class="headerlink" title="8)Apply clipRect and quickReject - Quiz &amp; Solution"></a>8)Apply clipRect and quickReject - Quiz &amp; Solution</h3><p>上面的示例图中显示了一个自定义的View，主要效果是呈现多张重叠的卡片。这个View的onDraw方法如下图所示：</p>
<p>打开开发者选项中的显示过度渲染，可以看到我们这个自定义的View部分区域存在着过度绘制。那么是什么原因导致过度绘制的呢？</p>
<h3 id="9-Fixing-Overdraw-with-Canvas-API"><a href="#9-Fixing-Overdraw-with-Canvas-API" class="headerlink" title="9)Fixing Overdraw with Canvas API"></a>9)Fixing Overdraw with Canvas API</h3><p>下面的代码显示了如何通过clipRect来解决自定义View的过度绘制，提高自定义View的绘制性能：</p>
<p>下面是优化过后的效果：</p>
<h3 id="10-Layouts-Invalidations-and-Perf"><a href="#10-Layouts-Invalidations-and-Perf" class="headerlink" title="10)Layouts, Invalidations and Perf"></a>10)Layouts, Invalidations and Perf</h3><p>Android需要把XML布局文件转换成GPU能够识别并绘制的对象。这个操作是在DisplayList的帮助下完成的。DisplayList持有所有将要交给GPU绘制到屏幕上的数据信息。</p>
<p>在某个View第一次需要被渲染时，Display List会因此被创建，当这个View要显示到屏幕上时，我们会执行GPU的绘制指令来进行渲染。</p>
<p>如果View的Property属性发生了改变（例如移动位置），我们就仅仅需要Execute Display List就够了。</p>
<p>然而如果你修改了View中的某些可见组件的内容，那么之前的DisplayList就无法继续使用了，我们需要重新创建一个DisplayList并重新执行渲染指令更新到屏幕上。</p>
<p>请注意：任何时候View中的绘制内容发生变化时，都会需要重新创建DisplayList，渲染DisplayList，更新到屏幕上等一系列操作。这个流程的表现性能取决于你的View的复杂程度，View的状态变化以及渲染管道的执行性能。举个例子，假设某个Button的大小需要增大到目前的两倍，在增大Button大小之前，需要通过父View重新计算并摆放其他子View的位置。修改View的大小会触发整个HierarcyView的重新计算大小的操作。如果是修改View的位置则会触发HierarchView重新计算其他View的位置。如果布局很复杂，这就会很容易导致严重的性能问题。</p>
<h3 id="11-Hierarchy-Viewer-Walkthrough"><a href="#11-Hierarchy-Viewer-Walkthrough" class="headerlink" title="11)Hierarchy Viewer: Walkthrough"></a>11)Hierarchy Viewer: Walkthrough</h3><p>Hierarchy Viewer可以很直接的呈现布局的层次关系，视图组件的各种属性。 我们可以通过红，黄，绿三种不同的颜色来区分布局的Measure，Layout，Executive的相对性能表现如何。</p>
<h3 id="12-Nested-Hierarchies-and-Performance"><a href="#12-Nested-Hierarchies-and-Performance" class="headerlink" title="12)Nested Hierarchies and Performance"></a>12)Nested Hierarchies and Performance</h3><p>提升布局性能的关键点是尽量保持布局层级的扁平化，避免出现重复的嵌套布局。例如下面的例子，有2行显示相同内容的视图，分别用两种不同的写法来实现，他们有着不同的层级。</p>
<p>下图显示了使用2种不同的写法，在Hierarchy Viewer上呈现出来的性能测试差异：</p>
<h3 id="13-Optimizing-Your-Layout"><a href="#13-Optimizing-Your-Layout" class="headerlink" title="13)Optimizing Your Layout"></a>13)Optimizing Your Layout</h3><p>下图举例演示了如何优化ListItem的布局，通过RelativeLayout替代旧方案中的嵌套LinearLayout来优化布局。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/12/13/Android性能优化之渲染篇/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Jian
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js?v=4.0.0.js"></script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">随笔</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Android Adb</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="https://www.zhihu.com" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>知乎</a>
            </li>
          
            <li class="search-li">
              <a href="http://www.mi.com" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>小米</a>
            </li>
          
            <li class="search-li">
              <a href="https://github.com/litten/hexo-theme-yilia" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>Yilia主题</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">曾经有个少年，后来变成了青年！</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>